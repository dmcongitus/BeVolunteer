{"ast":null,"code":"import _objectSpread from \"/home/minhcong/Desktop/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/minhcong/Desktop/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/minhcong/Desktop/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/minhcong/Desktop/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/minhcong/Desktop/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/minhcong/Desktop/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/minhcong/Desktop/client/src/containers/InfoPage/InfoPage.js\";\nimport React, { Component, Fragment } from 'react';\nimport './InfoPage.css';\nimport Axios from 'axios';\n\nvar InfoPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(InfoPage, _Component);\n\n  function InfoPage(props) {\n    var _this;\n\n    _classCallCheck(this, InfoPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InfoPage).call(this, props));\n\n    _this.handleEdit = function (field, e) {\n      if (field === \"identityCard\") {\n        _this[field].click();\n      } else {\n        _this[field].focus();\n      }\n    };\n\n    _this.handleImageChange = function (e) {\n      var profiles = _objectSpread({}, _this.state.profiles);\n\n      e.persist();\n      profiles.identityCard.value = URL.createObjectURL(e.target.files[0]);\n\n      _this.setState({\n        profiles: profiles,\n        profileChanged: true\n      });\n    };\n\n    _this.handleFocus = function (e) {\n      var actualValue = e.target.value;\n      e.target.value = '';\n      e.target.value = actualValue;\n    };\n\n    _this.handleChange = function (e) {\n      var profiles = _objectSpread({}, _this.state.profiles);\n\n      profiles[e.target.name].value = e.target.value;\n\n      _this.setState({\n        profiles: profiles,\n        profileChanged: true\n      });\n    };\n\n    _this.handleCancel = function () {\n      /* WARNING: JSON.parse(JSON.stringify(...)) is intended */\n      _this.setState({\n        profiles: JSON.parse(JSON.stringify(_this.initialProfiles)),\n        profileChanged: false\n      });\n    };\n\n    _this.componentDidMount = function () {\n      _this.setState({\n        isLoading: false\n      });\n    };\n\n    _this.handleUpdate = function () {\n      Axios.put('accounts/kumishida', Object.keys(_this.state.profiles).reduce(function (body, fieldName) {\n        if (fieldName == 'dob') {\n          body[fieldName] = new Date(_this.state.profiles[fieldName].value);\n        } else {\n          body[fieldName] = _this.state.profiles[fieldName].value;\n        }\n\n        return body;\n      }, {}), {\n        headers: {\n          'x-access-token': localStorage.getItem('token')\n        }\n      }).then(function (res) {\n        _this.setState({\n          profileChanged: false\n        });\n      }).catch(function (err) {\n        alert(err);\n      });\n    };\n\n    _this.ChangePost = function (e) {\n      _this.setState({\n        content_post: e.target.value\n      });\n    };\n\n    _this.sentPost = function () {\n      sentPostTransaction(_this.state.content_post, _this.props.userProfileReducer.sequence, function (rs) {\n        if (typeof rs === 'undefined') {\n          console.log('Fail to post');\n\n          _this.setState({\n            textNoti: 'Fail to post',\n            isOpenModal: true\n          });\n        } else {\n          if (rs.height === '0') {\n            console.log(rs.check_tx.log);\n\n            _this.setState({\n              textNoti: rs.check_tx.log,\n              isOpenModal: true\n            });\n          } else {\n            console.log('Post success');\n\n            _this.setState({\n              content_post: ''\n            });\n\n            _this.props.increase_sequence();\n          }\n        }\n      });\n    };\n\n    _this.renderAvatar = function (avatar, _className) {\n      try {\n        var src = 'data:image/jpeg;base64,' + Buffer.from(avatar).toString('base64');\n        return React.createElement(\"img\", {\n          src: src,\n          alt: \"avatar\",\n          className: _className,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        });\n      } catch (e) {\n        return React.createElement(\"img\", {\n          src: \"images/default-avatar.jpg\",\n          alt: \"avatar\",\n          className: _className,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        });\n      }\n    };\n\n    _this.state = {\n      isLoading: false,\n      renderTweets: [],\n      content_post: '',\n      isOpenModal: false,\n      textNoti: '',\n      profileChanged: false,\n      profiles: {\n        name: {\n          value: 'Nguyễn Trọng Nghĩa',\n          displayName: 'Tên'\n        },\n        phone: {\n          value: '0339190971',\n          displayName: 'Số điện thoại'\n        },\n        email: {\n          value: 'ntncsebku@gmail.com',\n          displayName: 'Địa chỉ email'\n        },\n        dob: {\n          value: '22/03/1998',\n          displayName: 'Ngày sinh'\n        },\n        address: {\n          value: '264 Lý Thường Kiệt',\n          displayName: 'Địa chỉ'\n        },\n        identityCard: {\n          value: undefined,\n          displayName: 'CMND'\n        },\n        accountType: {\n          value: 'personal',\n          displayName: 'Loại tài khoản'\n        }\n      }\n      /* WARNING: JSON.parse(JSON.stringify(...)) is intended for deep copy */\n\n    };\n    _this.initialProfiles = JSON.parse(JSON.stringify(_this.state.profiles));\n    _this.profileChanged = true; // Binds our scroll event handler\n\n    window.onscroll = function () {\n      if (document.documentElement.scrollTop === document.documentElement.scrollHeight - document.documentElement.offsetHeight) {\n        _this.props.loadMore();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(InfoPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.isLoading) {\n        return null;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"p-3 text-lg font-bold border-b border-solid border-grey-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"UpdateProfile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"UpdateProfile__Header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"UpdateProfile__Header__Left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Th\\xF4ng tin c\\xE1 nh\\xE2n\"), React.createElement(\"img\", {\n        alt: \"profile_icon\",\n        src: profileIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"UpdateProfile__Header__Right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"authenticated?\",\n        src: cancelIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Ch\\u01B0a \\u0111\\u01B0\\u1EE3c x\\xE1c th\\u1EF1c\"))), React.createElement(\"section\", {\n        className: \"UpdateProfile__Main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, Object.keys(this.state.profiles).map(function (field) {\n        var input;\n\n        switch (field) {\n          case 'accountType':\n            input = React.createElement(\"div\", {\n              className: \"UpdateProfile__Main__FieldValue\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 182\n              },\n              __self: this\n            }, React.createElement(\"select\", {\n              ref: function ref(el) {\n                return _this2[field] = el;\n              },\n              name: field,\n              onChange: _this2.handleChange,\n              value: _this2.state.profiles[field].value,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 183\n              },\n              __self: this\n            }, React.createElement(\"option\", {\n              value: \"private\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 184\n              },\n              __self: this\n            }, \"C\\xE1 nh\\xE2n\"), React.createElement(\"option\", {\n              value: \"group\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 185\n              },\n              __self: this\n            }, \"Nh\\xF3m\")));\n            break;\n\n          case 'identityCard':\n            input = React.createElement(\"div\", {\n              className: \"UpdateProfile__Main__FieldValue\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 192\n              },\n              __self: this\n            }, React.createElement(\"img\", {\n              src: _this2.state.profiles.identityCard.value || identityImage,\n              alt: \"Identity\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 193\n              },\n              __self: this\n            }), React.createElement(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              style: {\n                display: 'none'\n              },\n              ref: function ref(el) {\n                return _this2[field] = el;\n              },\n              onClick: function onClick(e) {\n                return e.target.value = null;\n              },\n              onChange: _this2.handleImageChange,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 194\n              },\n              __self: this\n            }), _this2.state.profiles.identityCard.value === undefined && React.createElement(\"div\", {\n              className: \"UpdateProfile__Main__FieldValue__Warning\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 195\n              },\n              __self: this\n            }, \"Vui l\\xF2ng c\\u1EADp nh\\u1EADt CMND \\u0111\\u1EC3 x\\xE1c th\\u1EF1c t\\xE0i kho\\u1EA3n\"));\n            break;\n\n          default:\n            input = React.createElement(\"input\", {\n              className: \"UpdateProfile__Main__FieldValue\",\n              name: field,\n              ref: function ref(el) {\n                return _this2[field] = el;\n              },\n              onFocus: _this2.handleFocus,\n              value: _this2.state.profiles[field].value,\n              onChange: _this2.handleChange,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 199\n              },\n              __self: this\n            });\n        }\n\n        return React.createElement(\"li\", {\n          className: \"UpdateProfile__Main__FieldItem\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"UpdateProfile__Main__FieldName\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, _this2.state.profiles[field].displayName), input, React.createElement(\"button\", {\n          onClick: _this2.handleEdit.bind(_this2, field),\n          className: \"UpdateProfile__Main__FieldEdit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: editIcon,\n          alt: \"Edit icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"UpdateProfile__Main__FieldEdit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, \"Ch\\u1EC9nh s\\u1EEDa\")));\n      }))), this.state.profileChanged && React.createElement(\"div\", {\n        className: \"UpdateProfile__Footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"UpdateProfile__Footer__Update\",\n        onClick: this.handleUpdate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"C\\u1EADp nh\\u1EADt\"), React.createElement(\"button\", {\n        className: \"UpdateProfile__Footer__Cancel\",\n        onClick: this.handleCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"H\\u1EE7y\"))), this.props.flagMe === \"following\" ? React.createElement(FollowingContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }) : null, this.props.flagMe === \"follower\" ? React.createElement(FollowerContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }) : null, this.props.flagMe === \"history\" ? React.createElement(HistoricalTransactionContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }) : null);\n    }\n  }]);\n\n  return InfoPage;\n}(Component);\n\nexport default InfoPage; // export default connect(mapStateToProps, null)(MeComponent);","map":{"version":3,"sources":["/home/minhcong/Desktop/client/src/containers/InfoPage/InfoPage.js"],"names":["React","Component","Fragment","Axios","InfoPage","props","handleEdit","field","e","click","focus","handleImageChange","profiles","state","persist","identityCard","value","URL","createObjectURL","target","files","setState","profileChanged","handleFocus","actualValue","handleChange","name","handleCancel","JSON","parse","stringify","initialProfiles","componentDidMount","isLoading","handleUpdate","put","Object","keys","reduce","body","fieldName","Date","headers","localStorage","getItem","then","res","catch","err","alert","ChangePost","content_post","sentPost","sentPostTransaction","userProfileReducer","sequence","rs","console","log","textNoti","isOpenModal","height","check_tx","increase_sequence","renderAvatar","avatar","_className","src","Buffer","from","toString","renderTweets","displayName","phone","email","dob","address","undefined","accountType","window","onscroll","document","documentElement","scrollTop","scrollHeight","offsetHeight","loadMore","profileIcon","cancelIcon","map","input","el","identityImage","display","bind","editIcon","flagMe"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport './InfoPage.css';\nimport Axios from 'axios';\n\nclass InfoPage extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: false,\n            renderTweets: [],\n            content_post: '',\n            isOpenModal: false,\n            textNoti: '',\n            profileChanged: false,\n            profiles: {\n                name: {\n                    value: 'Nguyễn Trọng Nghĩa',\n                    displayName: 'Tên'\n                },\n                phone: {\n                    value: '0339190971',\n                    displayName: 'Số điện thoại'\n                },\n                email: {\n                    value: 'ntncsebku@gmail.com',\n                    displayName: 'Địa chỉ email'\n                },\n                dob: {\n                    value: '22/03/1998',\n                    displayName: 'Ngày sinh'\n                },\n                address: {\n                    value: '264 Lý Thường Kiệt',\n                    displayName: 'Địa chỉ'\n                },\n                identityCard: {\n                    value: undefined,\n                    displayName: 'CMND'\n                },\n                accountType: {\n                    value: 'personal',\n                    displayName: 'Loại tài khoản'\n                }\n            }\n        }\n\n    /* WARNING: JSON.parse(JSON.stringify(...)) is intended for deep copy */\n        this.initialProfiles = JSON.parse(JSON.stringify(this.state.profiles));\n        this.profileChanged = true;\n\n        // Binds our scroll event handler\n        window.onscroll = () => {\n            if (document.documentElement.scrollTop === document.documentElement.scrollHeight - document.documentElement.offsetHeight) {\n                this.props.loadMore();\n            }\n        };\n    }\n\n    handleEdit = (field, e) => {\n        if (field === \"identityCard\") {\n            this[field].click();\n        } else {\n            this[field].focus();\n        }\n    }\n\n    handleImageChange = (e) => {\n        const profiles = { ...this.state.profiles };        \n\n        e.persist();\n        profiles.identityCard.value = URL.createObjectURL(e.target.files[0]);\n        this.setState({ profiles, profileChanged: true });\n    }\n\n    handleFocus = (e) => {\n        const actualValue = e.target.value;\n\n        e.target.value = '';\n        e.target.value = actualValue;\n    }\n\n    handleChange = (e) => {\n        const profiles = { ...this.state.profiles };        \n\n        profiles[e.target.name].value = e.target.value;\n        this.setState({ profiles, profileChanged: true });\n    }\n\n    handleCancel = () => {\n        /* WARNING: JSON.parse(JSON.stringify(...)) is intended */\n        this.setState({ profiles: JSON.parse(JSON.stringify(this.initialProfiles)), profileChanged: false });\n    }\n\n    componentDidMount = () => {\n        this.setState({isLoading: false});\n\n        \n    }\n\n    handleUpdate = () => {\n        Axios.put('accounts/kumishida', Object.keys(this.state.profiles).reduce((body, fieldName) => {\n            if (fieldName == 'dob') {\n                body[fieldName] = new Date( this.state.profiles[fieldName].value);\n            } else {\n                body[fieldName] = this.state.profiles[fieldName].value;\n            }\n            return body;\n        }, {}), {headers:{\n            'x-access-token': localStorage.getItem('token')\n        }}).then((res) => {\n            this.setState({ profileChanged: false });\n        }).catch((err) => {\n            alert(err);\n        });\n    }\n\n    ChangePost = (e) => {\n        this.setState({ content_post: e.target.value })\n    }\n    sentPost = () => {\n        sentPostTransaction(this.state.content_post, this.props.userProfileReducer.sequence, rs => {\n            if (typeof rs === 'undefined') {\n                console.log('Fail to post')\n                this.setState({\n                    textNoti: 'Fail to post',\n                    isOpenModal: true\n                })\n            }\n            else {\n                if (rs.height === '0') {\n                    console.log(rs.check_tx.log)\n                    this.setState({\n                        textNoti: rs.check_tx.log,\n                        isOpenModal: true\n                    })\n                }\n                else {\n                    console.log('Post success')\n                    this.setState({ content_post: '' })\n                    this.props.increase_sequence();\n                }\n            }\n        })\n    }\n    renderAvatar = (avatar, _className) => {\n        try {\n            const src = 'data:image/jpeg;base64,' + Buffer.from(avatar).toString('base64');\n            return (<img src={src} alt=\"avatar\" className={_className} />)\n        }\n        catch (e) {\n            return (<img src=\"images/default-avatar.jpg\" alt=\"avatar\" className={_className} />)\n        }\n    }\n\n    render() {\n        if (this.state.isLoading) {\n            return null;\n        }\n\n        return (\n            <div className=\"p-3 text-lg font-bold border-b border-solid border-grey-light\" >\n            \n                <div className=\"UpdateProfile\" >\n                    <section className=\"UpdateProfile__Header\">\n                        <div className=\"UpdateProfile__Header__Left\">\n                            <div>Thông tin cá nhân</div>\n                            <img alt=\"profile_icon\" src={profileIcon} />\n                        </div>\n                        <div className=\"UpdateProfile__Header__Right\">\n                            <img alt=\"authenticated?\" src={cancelIcon} />\n                            <div>Chưa được xác thực</div>\n                        </div>\n                    </section>\n\n                    <section className=\"UpdateProfile__Main\" >\n                        <ul>\n                            {Object.keys(this.state.profiles).map(field => {\n                                let input;\n                                switch (field) {\n                                    case 'accountType':\n                                        input =\n                                            <div className=\"UpdateProfile__Main__FieldValue\" >\n                                            <select ref={el => this[field] = el} name={field} onChange={this.handleChange} value={this.state.profiles[field].value} >\n                                                    <option value=\"private\">Cá nhân</option>\n                                                    <option value=\"group\">Nhóm</option>\n                                                </select>\n                                            </div>\n                                        break;\n   \n                                    case 'identityCard':\n                                        input =\n                                            <div className=\"UpdateProfile__Main__FieldValue\">\n                                                <img src={this.state.profiles.identityCard.value || identityImage} alt=\"Identity\" />\n                                            <input type=\"file\" accept=\"image/*\" style={{ display: 'none' }} ref={el => this[field] = el} onClick={e => e.target.value = null} onChange={this.handleImageChange}/>\n                                                {this.state.profiles.identityCard.value === undefined && <div className=\"UpdateProfile__Main__FieldValue__Warning\">Vui lòng cập nhật CMND để xác thực tài khoản</div>}\n                                            </div>\n                                        break;\n                                    default:\n                                        input = <input className=\"UpdateProfile__Main__FieldValue\" name={field} ref={el => this[field] = el} onFocus={this.handleFocus} value={this.state.profiles[field].value} onChange={this.handleChange}/>\n                                }\n\n                                return (\n                                    <li className=\"UpdateProfile__Main__FieldItem\">\n                                        <div className=\"UpdateProfile__Main__FieldName\">{this.state.profiles[field].displayName}</div>\n                                        {input}\n                                        <button onClick={this.handleEdit.bind(this, field)} className=\"UpdateProfile__Main__FieldEdit\">\n                                            <img src={editIcon} alt=\"Edit icon\"/>\n                                            <div className=\"UpdateProfile__Main__FieldEdit\" >Chỉnh sửa</div>\n                                        </button>\n                                    </li>\n                                )\n                            })}\n                        </ul>\n                    </section>\n                    \n                    {this.state.profileChanged && <div className=\"UpdateProfile__Footer\">\n                        <button className=\"UpdateProfile__Footer__Update\" onClick={this.handleUpdate}>Cập nhật</button>\n                        <button className=\"UpdateProfile__Footer__Cancel\" onClick={this.handleCancel}>Hủy</button></div>}\n                </div>\n                {\n                    this.props.flagMe === \"following\" ?\n                        <FollowingContainer /> : null\n                }\n                {\n                    this.props.flagMe === \"follower\" ?\n                        <FollowerContainer /> : null\n                }\n                {\n                    this.props.flagMe === \"history\" ?\n                        <HistoricalTransactionContainer /> : null\n                }\n            </div>\n        );\n    }\n}\n\n\n\nexport default (InfoPage);\n// export default connect(mapStateToProps, null)(MeComponent);"]},"metadata":{},"sourceType":"module"}